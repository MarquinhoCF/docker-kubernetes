docker image build -t feedback-node .

docker run --name feedback-app -p 3000:80 -d --rm feedback-node

## Anonymous Volume (It's deleted when the container is removed)
docker run --name feedback-app -d -p 3000:80 -v /app/feedback --rm feedback-node

## Named Volume (It's not deleted when the container is removed)
docker run --name feedback-app -d -p 3000:80 -v feedback:/app/feedback --rm feedback-node

## Bind Mount 
# Usado para desenvolvimento, pois as alterações feitas no código fonte são refletidas imediatamente no container
# Tomar cuidado para não sobrescrever os arquivos das dependências do 'node_modules' (criamos um volume anônimo para o 
# 'node_modules', de forma a assegurar que os arquivos das dependências não sejam sobrescritos)
docker run --name feedback-app -d -p 3000:80 -v feedback:/app/feedback -v "/home/marcos/docker-kubernetes/Section 3 - Volumes/data-volumes-01-starting-setup:/app/" -v /app/node_modules --rm feedback-node

## Read only Bind Mount
# Usado para evitar que o container faça alterações no código fonte, enquanto o código fonte é atualizado no host 
docker run --name feedback-app -d -p 3000:80 -v feedback:/app/feedback -v "/home/marcos/docker-kubernetes/Section 3 - Volumes/data-volumes-01-starting-setup:/app/:ro" -v /app/temp -v /app/node_modules --rm feedback-node


## Gerenciando os volumes

# 1. Listar
docker volume ls


# 2. Criar
docker volume create feedback


# 2.1 Criar um volume com um driver específico

# 2.1.1 Criar um volume com o driver local (driver padrão)
docker volume create --driver local --name feedback

# 2.1.2 Criar um volume com o driver local e opções específicas
docker volume create --driver local --name feedback -o type=tmpfs -o device=tmpfs -o o=size=100m
    # Tipos de opções para o driver local:
    # - type: tipo do sistema de arquivos (ex: tmpfs, nfs, etc.)
    # - device: dispositivo ou caminho do sistema de arquivos (ex: tmpfs, /dev/sda1, etc.)
    # - o: opções adicionais para o sistema de arquivos (ex: size=100m, rw, etc.)


# 3. Inspecionar
docker volume inspect feedback

# 4. Remover
docker volume rm feedback

# 4.1 Remover todos os volumes não utilizados
docker volume prune


## ARGS e ENV

ENV PORT=80
ARG PORT=80
# ${PORT} e ${PORT} são variáveis de ambiente, e podem ser usadas tanto em tempo de construção da imagem (build time) quanto em tempo de execução do container (run time).

docker run --name feedback-app -d -p 3000:8000 --env PORT=8000 -v feedback:/app/feedback -v "/home/marcos/docker-kubernetes/Section 3 - Volumes/data-volumes-01-starting-setup:/app/:ro" -v /app/temp -v /app/node_modules --rm feedback-node

# Usando arquivo .env para definir variáveis de ambiente
docker run --name feedback-app -d -p 3000:8000 --env-file ./.env -v feedback:/app/feedback -v "/home/marcos/docker-kubernetes/Section 3 - Volumes/data-volumes-01-starting-setup:/app/:ro" -v /app/temp -v /app/node_modules --rm feedback-node

# Usando ARG para definir variáveis de ambiente em tempo de construção da imagem
docker image build -t feedback-node --build-arg DEFAULT_PORT=8000 .